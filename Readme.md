Сервис для скачивания файлов.

Что делает сервис:
Сервис получает задачу. В задаче указан список URL ссылок, по которым нужно скачать файлы. Скаченные файлы хранятся локально в одной папке.

Как работает сервис:
Сервис реализовывает HTTP запросы.
В сервисе используется 2 метода:
Метод POST:
    Получает json, в котором указаны: Id задачи, список URL ссылок.
    Получив задание, оно попадает в менеджер, который добавляет заданиче в очередь и создаёт информацию о задаче и сохраняет её в репозиторий.
    Параллельно работает обработчик, он каждые 5 секунд проверяет очередь на наличие задач. При наличии задачи он забирает её из очереди и производит скачивание по каждой ссылке. После каждого окончания скачивания файла по ссылке, обновляет информацию о задаче и сохраняет в репозиторий. По окончании обработки задачи, отдаёт команду очереди, чтобы та смогла обновить очередь и сохранить своё состояние в файл.

Метод Get:
    Получает json, в котором указан Id задачи, по которой необходимо узнать информацию по её обработке.
    Получив задание, оно попадает в менеджер, который обращается к репозиторию, и получает подробную информацию о задаче.
    После чего возвращает информацию о заказе в формате json.

Реализация инструментария:
    Менеджер:
        Имеет 2 метода AddTask и GetTask.
        AddTask принимает в аргументах json. Парсит и создаёт модель задачи в которую заносит Id и URL ссылки из полученного json, ставит статус "Получено" и время создания модели(получения задачи). После этого заносит задачу в очередь.

        GetTask принимает в аргументах json. Парсит и получает Id задачи по которой нужно вернуть информацию. Осуществляет запрос по Id в репозиторий. И полученную информацию возвращает, в случае неудачного запроса, возвращает ошибку.

    Обработчик задачи (Worker):
        Имеет 1 метод ProcessTask:
            ProcessTask каждые 5 секунд проверяет очередь на наличие задач. Также проверяет сигнал остановки сервиса. Получает из очереди модель задачи. Меняет статус на "В работе", проверяет каждую URL ссылку обработана она или нет. Если ссылка ещё не обработанна обращается к обработчику URL, дожидается обработки, и добавляет в модель задачи URL ссылку, в случае успеха сохраняет путь к файлу, в случае неудачи записывает ошибку. Сохраняет модель в репозиторий, после каждой обработанной URL ссылки. Проверяет сигнал остановки, перед обработкой следующей URL ссылки. После окончания обработки задачи ставит статус "Завершено". Сохраняет в репозиторий и сообщает очереди, что задача обработана.
    Репозиторий:
        Имеет 2 метода Save и Get:
            Save получает модель задачи. Парсит модель в json. Создаёт или пересоздаёт файл имя которого Id задачи, расширение файла (.json). Сохраняет в файл информацию о задаче.

            Get получает Id задачи. Проверяет существование файла, который хранит информацию о задаче. Если файл существует, читает его и возвращает, иначе возвращает ошибку.
    Очередь:
        Имеет 4 метода Enqueue, Dequeue, IsEmpty, TaskCompleated:
            Enqueue получает модель задачи. Открывает файл хранящий состояние очереди, дописывает в конец Id задачи. Сохраняет информацию о задаче в репозиторий. Добавляет модель задачи в очередь(слайс хранящий модели задач, которая хранится в памяти), так же добавляет Id задачи в очередь(слайс хранящий Id задач).

            Dequeue проверяет очередь на пустоту. Получает задачу из очереди(получает модель задачи из слайса). Удаляет из слайса полученную задачу. Возвращяет модель задачи.

            IsEmpty проверяет очередь на пустоту, если очередь пуста возвращает true, иначе false(проверяет слайс, который хранить модели задач).

            TaskCompleated получает Id выполненной задачи. Находим Id в очереди(слайс хранящий Id задач). Удаляем из очереди Id задачи и пересохраняем состояние очереди(слайс, хранящий Id задач) в файл.

    Обработчик URL ссылки(Handler):
        Имеет 1 метод Download:
            Download получает URL ссылку. Проверяет ссылку на валидность. Реализует Get запрос, в ответе которого должен храниться файл. Проверяет статус код выполнения запроса. Создаёт файл, имя файла создаётся из URL ссылки. Копируем данные из тела Get ответа в созданный файл. Возвращает путь к файлу, в случае неудачи возвращяет ошибку.

Как происходит запуск сервиса:
    Создаётся контекст, который даёт сигнал для завершения. В отдельной горутине запускается функция StopContext которая ожидает сигнала остановки сервиса. Если сигнал получен, вызывается сигнал отмены. Который слушает обработчик(Worker) и серевер.
    Вызываются конструкторы:
        Создание обработчика URL ссылок(передаётся путь, куда должны загружаться файлы). Проверят существует ли папка или нет, если папка не существует, то создаёт её.

        Создание репозитория(передаётся путь, где должны храниться файлы хранящие информацию о задачах). Проверяет существование папки, если не существует, то создаёт её.

        Создание очереди(передаётся путь папки, где должен храниться файл очереди, и передаётся название файла). Проверяет существование папки и файла, в случае отсутствия создаёт. Если файл существует читает его и на основе этих данных создаёт очередь.

        Создаётся менеджер(передаётся ссылка на репозиторий и очередь).

        Создаётся обработчик задач(Worker)(передаются ссылки на обработчик URL, на очередь, на репозиторий, так же передаётся ссылка на группу ожидания (которая отвечает за синхронизированную остановку сервисов), передаётся контекст(который сообщит обработчику о команде остановки сервиса)).

    Запускаются обработчики задач.

    Прописываются URL сервиса на котором он работает.

    Создаём HTTP сервер с поддержкой корректной остановки.

    В отдельной горутине запускается сервер.
